# Hot & Cold Publishers

---

## Introducción

En programación reactiva (y particularmente en Project Reactor), los términos `Hot Publisher` y `Cold Publisher` hacen
referencia a cómo se manejan las emisiones de datos y cómo los suscriptores reciben esos datos de los publishers.
Entender la diferencia entre ellos es fundamental para manejar correctamente el comportamiento de los flujos de datos.

### Cold Publisher (Publicador frío)

Un `Cold Publisher` es un flujo de datos que `emite elementos desde el principio cada vez que un suscriptor
se conecta.` Los `cold publishers` producen datos `bajo demanda`, es decir, el flujo comienza a emitir sus elementos
solo cuando hay un suscriptor y `cada suscriptor recibe los datos desde el inicio`.

**Características de los Cold Publishers:**

- Cada nuevo suscriptor verá las emisiones desde el principio, sin importar cuándo se conecte.
- Los datos suelen ser generados bajo demanda para cada suscriptor.
- `Ejemplo`: Flujos de datos que se generan a partir de bases de datos, archivos, o cálculos, donde cada suscriptor
  necesita ver todos los datos desde el inicio.

````java
public static void main(String[] args) {
    Flux<Integer> coldFlux = Flux.range(1, 5); // Un Flux que emite números del 1 al 5

    coldFlux.subscribe(value -> System.out.println("Subscriber 1: " + value));
    coldFlux.subscribe(value -> System.out.println("Subscriber 2: " + value));
}
//Subscriber 1: 1
//Subscriber 1: 2
//Subscriber 1: 3
//Subscriber 1: 4
//Subscriber 1: 5
//Subscriber 2: 1
//Subscriber 2: 2
//Subscriber 2: 3
//Subscriber 2: 4
//Subscriber 2: 5
````

En este caso, cada suscriptor recibe los números del 1 al 5 desde el inicio, independientemente del momento en el que se
suscriba.

Ejemplos del mundo real:

- Llamadas a bases de datos.
- Lectura de archivos.
- Fetch de APIs, donde cada suscriptor obtiene una nueva llamada y datos frescos.

### Hot Publisher (Publicador caliente)

Un `Hot Publisher` es un flujo que `emite datos de forma continua`, independientemente de si hay suscriptores presentes.
Si un suscriptor se conecta a un hot publisher `tarde`, recibirá solo los datos que se emiten `después` de su
suscripción. Esto significa que cualquier dato emitido antes de la suscripción no será recibido por el nuevo suscriptor.

**Características de los Hot Publishers:**

- Los datos fluyen independientemente de los suscriptores.
- Los suscriptores que se conecten tarde se perderán los elementos ya emitidos.
- Son útiles para eventos que no dependen del suscriptor, como transmisiones en vivo.
- `Ejemplo`: Sensores de temperatura, transmisión de datos en tiempo real.

````java
public class Test {
    public static void main(String[] args) throws InterruptedException {
        Flux<Long> hotFlux = Flux.interval(Duration.ofSeconds(1)) // Emite un número cada segundo
                .share(); // Convierte este Cold Flux en Hot

        hotFlux.subscribe(value -> System.out.println("Subscriber 1: " + value));

        // Esperamos 3 segundos antes de añadir el segundo suscriptor
        Thread.sleep(3000);

        hotFlux.subscribe(value -> System.out.println("Subscriber 2: " + value));

        Thread.sleep(5000);
    }
}
//Subscriber 1: 0
//Subscriber 1: 1
//Subscriber 1: 2
//Subscriber 1: 3
//Subscriber 2: 3
//Subscriber 1: 4
//Subscriber 2: 4
//Subscriber 1: 5
//Subscriber 2: 5
//Subscriber 1: 6
//Subscriber 2: 6
//Subscriber 1: 7
//Subscriber 2: 7
````

**En este caso:**

- El `Suscriptor 1` comienza a recibir datos de inmediato.
- El `Suscriptor 2` se conecta 3 segundos después, por lo que no verá los primeros 3 valores emitidos y comenzará a
  recibir datos desde el cuarto valor.

**Ejemplos del mundo real:**

- `Sensores`: Un sensor que mide la temperatura sigue emitiendo datos, y cualquier suscriptor que se conecte después
  solo verá los datos a partir de su conexión.
- `Eventos en tiempo real`: Streams de redes sociales, precios de acciones en bolsa, etc., donde los suscriptores que se
  unan tarde no ven eventos pasados, solo eventos futuros.
